#!/bin/bash

# Do not edit this file unless you know what you are doing

if [[ $chosenimg = "recovery" ]]; then	
	if [[ ! $(cat $romdir/system/build.prop | grep "ro.board.platform" | cut -d"=" -f2 | grep ^mt) = "" ]]; then
		mkdir $romdir/recoveryimg
		cd $romdir/recoveryimg
		cp $romdir/recovery.img $romdir/recoveryimg/recovery.img
		( exec $tools/boot/mtk-tools/unpack-MTK.pl recovery.img 2>&1 ) >> $logs/boot.log
	else			
		cd $tools/boot/mkbootimg
		( exec ./unpackimgr.sh $romdir/recovery.img 2>&1 ) >> $logs/boot.log
	fi
elif [[ $chosenimg = "boot" ]]; then
	if [[ ! $(cat $romdir/system/build.prop | grep "ro.board.platform" | cut -d"=" -f2 | grep ^mt) = "" ]]; then
		mkdir $romdir/bootimg
		cd $romdir/bootimg
		cp $romdir/boot.img $romdir/bootimg/boot.img
		( exec $tools/boot/mtk-tools/unpack-MTK.pl boot.img 2>&1 ) >> $logs/boot.log
	else
		cd $tools/boot/mkbootimg
		( exec ./unpackimg.sh $romdir/boot.img 2>&1 ) >> $logs/boot.log
	fi
fi
cd $scripts
exec ./boot_tools
